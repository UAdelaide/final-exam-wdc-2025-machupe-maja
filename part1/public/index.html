<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Doggo of the Day</title>
    <link rel="stylesheet" href="stylesheets/style.css" />
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  </head>

  <body>
    <main id="content">
      <h1>Dog of the Day</h1>
      <button 
        type="button" 
        title="Fetch a random picture of a husky"
        @click="fetchRandoDoggo()">
        huskify</button>
      <div id="doggoContainer">
        <img :src="doggo.url" title="A picture of a husky" />
        <p v-if="doggoErr" id="error">{{doggoErr}}</p>
      <div>
    </main>

    <script type="module">
      const {createApp} = Vue;

      createApp({
        data() {
          return {
            doggo: {
              url: ""
            },
            doggoErr: ""
          }
        },
        methods: {
          async fetchRandoDoggo() {
            // Fetch!
            const response = await fetch("https://dog.ceo/api/breed/husky/images/random", {
              method: "GET"
            });

            const results = await response.json();
            
            // Oh noooo
            if (!response.ok) {
              this.doggoErr = "Couldn't fetch the doggo"
            }

            // Set the URL
            if (results && results.status === "success") {
              this.doggo.url = results.message;
            }
          }
        },
        mounted() {
          this.fetchRandoDoggo().then();
        }  
      }).mount("#content");
    </script>
  </body>
</html>
